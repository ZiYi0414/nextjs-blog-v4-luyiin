---
title: 'Setä¸Mapæ•°æ®ç»“æ„'
description: 'ä¸€ç¯‡æˆ‘å­¦ä¹ Setä¸Mapæ•°æ®ç»“æ„çš„ç¬”è®°è€Œå·²ï¼Œå¾ˆåŸºç¡€'
publishedAt: '2020-05-21'
tags: 'Note'
---

# Set å’Œ Map æ•°æ®ç»“æ„

ES6 æ–°æä¾›äº†æ•°æ®ç»“æ„ Set ä¸ Mapï¼Œä½¿ç”¨è¿™ä¸ªä¸¤ä¸ªæ•°æ®è¿›è¡Œå¼€å‘ï¼Œä¼šèµ·åˆ°ç®€æ´ä»£ç é€»è¾‘æ›´æ¸…æ™°çš„æ•ˆæœã€‚

### ç»“è®ºï¼šSet ç±»ä¼¼ä¸€ä¸ªæ•°ç»„ï¼Œä½†å†…å®¹å”¯ä¸€ï¼ŒMap åˆ™è§£å†³äº†é”®å€¼å¯¹ï¼Œå¿…é¡»ç”±å­—ç¬¦ä¸²å¯¹åº”å€¼ï¼Œå˜æˆäº†å€¼å¯¹å€¼ï¼Œå¹¶ä¸”åªè¦å†…å­˜ä¸­åœ°å€ä¸åŒå°±ä¼šè¢«è§†ä¸ºæ–°çš„é”®å€¼ã€‚

- ## Set

  ES6 æä¾›äº†æ–°çš„æ•°æ®ç»“æ„ Setã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æˆå‘˜å€¼æ˜¯**_å”¯ä¸€çš„_**ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚

  Set æœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Set æ•°æ®ç»“æ„ã€‚

```JavaScript
const s = new Set();

[2, 3, 4, 5, 6, 2, 2].forEach(x => s.add(x));

console.log(...s);
//2,3,4,5,6
```

ä¸Šè¿°ä»£ç é€šè¿‡ **add()** æ–¹æ³•å‘ Set ç»“æ„åŠ å…¥æˆå‘˜ï¼Œ**ç»“æœè¡¨æ˜ Set ç»“æ„ä¸ä¼šæ·»åŠ é‡å¤çš„å€¼ã€‚**

Set**å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–è€…å…·æœ‰ iterableï¼ˆå¯è¿­ä»£çš„æ„æ€ï¼‰æ¥å£çš„å…¶ä»–æ•°æ®ç»“æ„ï¼‰å¶ä¸ºå‚æ•°ï¼Œç”¨æ¥åˆå§‹åŒ–ã€‚**

```JavaScript
//ä¾‹ä¸€
const set = new Set([1,2,3,4,4])
[...set]
//[1,2,3,4]

//ä¾‹äºŒ
const items = new Set([1,2,3,4,5,5,5,5,5])
items.size // 5

//ä¾‹ä¸‰
const set = new Set(document.querySelectorAll('div'))
set.size // 56

//ç±»ä¼¼äº
const set = new Set();
document
 .querySelectorAll('div')
 .forEach(div => set.add(div));
set.size // 56

```

ä¸Šè¿°ä»£ç ä¸­ï¼Œä¾‹ä¸€å’Œä¾‹äºŒéƒ½æ˜¯ Set å‡½æ•°æ¥å—æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œä¾‹ä¸‰æ˜¯æ¥å—è•¾ä¸æ•°ç»„çš„å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚

ä¸Šé¢ä»£ç ä¹Ÿå±•ç¤ºäº†ä¸€ç§å»é™¤æ•°ç»„é‡å¤æˆå‘˜çš„æ–¹æ³•ã€‚

```JavaScript
//å»é™¤æ•°ç»„çš„é‡å¤æˆå‘˜
[...new Set(array)];
```

ä¸Šé¢çš„æ–¹æ³•ä¹Ÿå¯ä»¥ç”¨äºï¼Œå»é™¤å­—ç¬¦é‡Œé¢çš„é‡å¤å­—ç¬¦ã€‚ğŸ‘‡

```JavaScript
[...new Set('ababbc')].join('');
// "abc"
```

### æ³¨æ„ï¼šå‘ Set ä¸­åŠ å…¥å€¼ä¸ä¼šè¢«ç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥"5"ä¸ 5 æ˜¯ä¸åŒçš„å€¼ã€‚å†…éƒ¨ä¼šè¿›è¿›è¡Œç±»ä¼¼===çš„ç²¾ç¡®åˆ¤æ–­ï¼Œæ‰€ä»¥ Size ä¼šæ˜¯ 2.

> å¦å¤–ï¼Œä¸¤ä¸ªå¯¹è±¡æ€»æ˜¯ä¸æƒ³ç­‰çš„ã€‚æ‰€ä»¥æ·»åŠ å¯¹è±¡ä¼šæ²¡æœ‰é™åˆ¶ã€‚

Array.from æ–¹æ³•å¯ä»¥å°† Set ç»“æ„è½¬ä¸ºæ•°ç»„ã€‚

```JavaScript
const items = new Set([1, 2, 3, 4, 5]);
const array = Array.from(items);
```

è¿™å°±æä¾›äº†å»é™¤æ•°ç»„é‡å¤æˆå‘˜çš„å¦ä¸€ç§æ–¹æ³•ã€‚

```JavaScript
function dedupe(array) {
  return Array.from(new Set(array));
}

dedupe([1, 1, 2, 3]); // [1, 2, 3]
```

# Map

Map è§£å†³ es6 ä¹‹å‰çš„ä¸€å¤§é—®é¢˜å°±æ˜¯ï¼Œobject å¯¹è±¡ï¼Œæœ¬è´¨ä¸Šæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†åªèƒ½ä½¿ç”¨**å­—ç¬¦ä¸²**å½“ä½œé”®ã€‚

ES6 æä¾›äº† Map æ•°æ®ç»“æ„ã€‚å®ƒç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹é›†åˆï¼Œä½†**é”®**çš„èŒƒå›´ä¸é™äº**å­—ç¬¦ä¸²**ï¼Œå„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ã€‚

```JavaScript
const map = new Map();

map.set(['a'], 555);
map.get(['a']); // undefined
```

ä¸Šé¢çš„ä»£ç ï¼Œè¡¨é¢ä¸Šæ˜¯é’ˆå¯¹åŒä¸€ä¸ªé”®ï¼Œä½†å®é™…ä¸Šæ˜¯ä¸¤ä¸ªä¸åŒçš„æ•°ç»„å®ä¾‹ï¼Œå†…å­˜åœ°å€æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥ get æ–¹æ³•æ— æ³•è·å–åˆ°è¯¥é”®ï¼Œè¿”å› undefined

### æ³¨æ„ï¼šç”±ä¸Šå¯çŸ¥ï¼ŒMap çš„é”®å®é™…ä¸Šæ˜¯è·Ÿå†…å­˜åœ°å€ç»‘å®šçš„ï¼Œåªè¦å†…å­˜åœ°å€ä¸åŒï¼Œå°±ä¼šè§†ä¸ºä¸¤ä¸ªé”®ã€‚è¿™å°±è§£å†³äº†åŒåå±æ€§ç¢°æ’çš„é—®é¢˜ï¼Œæ‰©å±•åˆ«äººçš„æ—¶å€™ï¼Œå°±ä¸ç”¨æ‹…å¿ƒè‡ªå·±çš„å±æ€§ä¸åˆ«äººç›¸åŒäº†ã€‚

å¦‚æœ**_Map çš„é”®æ˜¯ä¸€ä¸ªç®€å•ç±»å‹çš„å€¼ï¼ˆnumberï¼ŒStringï¼Œbooleanï¼‰_**ï¼Œåˆ™åªè¦ä¸¤ä¸ªå€¼ä¸¥æ ¼ç›¸ç­‰ï¼ŒMap å°†ä¼šè§†å…¶ä¸ºä¸€ä¸ªé”®ï¼Œæ¯”å¦‚ 0 ä¸-0 å°±é€ä¸€ä¸ªï¼Œtrue ä¸å­—ç¬¦ä¸²â€œtrueâ€å°±æ˜¯ä¸åŒçš„ã€‚

```JavaScript
let map = new Map();

map.set(-0, 123);
map.get(+0); // 123

map.set(true, 1);
map.set('true', 2);
map.get(true); // 1

map.set(undefined, 3);
map.set(null, 4);
map.get(undefined); // 3

map.set(NaN, 123);
map.get(NaN); // 123
```

# æ€»ç»“ï¼š

## Set ç±»ä¼¼ä¸€ä¸ªæ•°ç»„ï¼Œä½†å†…å®¹å”¯ä¸€ï¼ŒMap åˆ™è§£å†³äº†é”®å€¼å¯¹ï¼Œå¿…é¡»ç”±å­—ç¬¦ä¸²å¯¹åº”å€¼ï¼Œå˜æˆäº†å€¼å¯¹å€¼ï¼Œå¹¶ä¸”åªè¦å†…å­˜ä¸­åœ°å€ä¸åŒå°±ä¼šè¢«è§†ä¸ºæ–°çš„é”®å€¼ã€‚
